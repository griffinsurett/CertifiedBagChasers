---
// src/components/LoopComponents/SocialIcon.astro
/**
 * Social Icon Component
 *
 * Individual social media icon with:
 * - Dark circular background
 * - Gold metallic gradient icon color
 * - Size variants (sm, md, lg)
 * - Hover lift and glow effect
 *
 * Used in SocialMediaVariant for social media links.
 */

import Icon from '@/components/Icon';

export interface Props {
  title: string;              // Platform name (for aria-label)
  link?: string;             // URL to social profile
  icon?: any;                // Icon identifier
  size?: 'sm' | 'md' | 'lg'; // Icon size
}

const { title, link, icon, size = 'md' } = Astro.props;

// Default to globe icon if none specified
const displayIcon = icon || 'lu:globe';

// Size configuration matching React version
const sizeStyles = {
  sm: { container: 'w-10 h-10', iconSize: 'sm' as const },
  md: { container: 'w-[50px] h-[50px]', iconSize: 'md' as const },
  lg: { container: 'w-15 h-15', iconSize: 'lg' as const },
};

const s = sizeStyles[size] || sizeStyles.md;
const gradientIdBase = `${title || 'icon'}-${size}`
  .toLowerCase()
  .replace(/[^a-z0-9]+/g, '-')
  .replace(/^-+|-+$/g, '');
const gradientId = `social-icon-gold-gradient-${gradientIdBase || 'default'}`;
const iconStyle = {
  '--social-icon-gradient': `url(#${gradientId})`,
  color: 'var(--color-accent)',
} as any;

// Base classes matching React styling
const baseClasses = `${s.container} bg-gradient-to-br from-[#1a1a1a] to-bg-secondary border border-primary/30 rounded-full flex items-center justify-center cursor-pointer transition-all duration-300 no-underline hover:-translate-y-[3px] hover:shadow-[0_8px_25px_rgba(201,162,39,0.3)] hover:border-primary/60`;
---

<svg aria-hidden="true" width="0" height="0" focusable="false" class="pointer-events-none w-0 h-0 overflow-hidden">
  <defs>
    <linearGradient id={gradientId} x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="var(--color-accent-50)" />
      <stop offset="8%" stop-color="var(--color-accent-100)" />
      <stop offset="20%" stop-color="var(--color-accent-300)" />
      <stop offset="35%" stop-color="var(--color-accent-500)" />
      <stop offset="50%" stop-color="var(--color-accent-400)" />
      <stop offset="70%" stop-color="var(--color-accent-700)" />
      <stop offset="90%" stop-color="var(--color-accent-800)" />
      <stop offset="100%" stop-color="var(--color-accent-900)" />
    </linearGradient>
  </defs>
</svg>

{/* Render as link if URL provided */}
{link ? (
  <a
    href={link}
    target="_blank"
    rel="noopener noreferrer"
    class={baseClasses}
    aria-label={`Visit our ${title} page`}
    title={title}
  >
    <Icon
      icon={displayIcon}
      size={s.iconSize}
      className="social-icon-gradient-icon"
      style={iconStyle}
    />
  </a>
) : (
  /* Otherwise just display icon */
  <div
    class={baseClasses}
    title={title}
  >
    <Icon
      icon={displayIcon}
      size={s.iconSize}
      className="social-icon-gradient-icon"
      style={iconStyle}
    />
  </div>
)}

<style>
  :global(.social-icon-gradient-icon[fill="currentColor"]) {
    fill: var(--social-icon-gradient) !important;
  }

  :global(.social-icon-gradient-icon[stroke="currentColor"]) {
    stroke: var(--social-icon-gradient) !important;
  }

  :global(.social-icon-gradient-icon [fill="currentColor"]) {
    fill: var(--social-icon-gradient) !important;
  }

  :global(.social-icon-gradient-icon [stroke="currentColor"]) {
    stroke: var(--social-icon-gradient) !important;
  }
</style>
