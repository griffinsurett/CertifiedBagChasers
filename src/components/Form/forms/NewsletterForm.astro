---
// src/components/Form/forms/NewsletterForm.astro
/**
 * Newsletter Form - Footer Version
 * Minimal email capture for the footer.
 */
import Button from "@/components/Button/Button";
import FormWrapper from "@/components/Form/FormWrapper";
import Input from "@/components/Form/inputs/Input";

interface Props {
  title?: string;
  description?: string;
  submitText?: string;
  successMessage?: string;
  className?: string;
}

const {
  title = "Subscribe to the newsletter",
  description = "Weekly market insights and member wins. No spam.",
  submitText = "Subscribe",
  successMessage = "You're subscribed. Welcome to the list!",
  className = "",
} = Astro.props;

const handleSubmit = async (values: any) => {
  console.log("Newsletter form submitted:", values);
};
---

<div
  class={`rounded-xl border border-primary/20 bg-gradient-to-br from-[#151515] to-[#0d0d0d] p-4 ${className}`}
>
  <div class="mb-3">
    <h4 class="text-text font-bold">{title}</h4>
    <p class="text-text-muted text-sm mt-1">{description}</p>
  </div>

  <FormWrapper
    client:idle
    onSubmit={handleSubmit}
    successMessage={successMessage}
    errorMessage="There was an error. Please try again."
    resetOnSuccess={true}
    className="w-full"
  >
    <div class="flex flex-col gap-3">
      <Input
        name="email"
        type="email"
        required={true}
        placeholder="you@email.com"
        aria-label="Email address"
        showLabel={false}
        containerClassName="mb-0 flex-1"
        inputClassName="w-full px-4 py-3 bg-bg border border-white/10 rounded-lg focus:outline-none focus:border-primary text-white placeholder:text-text-dim"
      />

      <Button
        variant="secondary"
        type="submit"
        className="whitespace-nowrap"
      >
        {submitText}
      </Button>
    </div>

    <p class="text-[11px] text-text-dim mt-3">
      Unsubscribe anytime.
    </p>
  </FormWrapper>
</div>
