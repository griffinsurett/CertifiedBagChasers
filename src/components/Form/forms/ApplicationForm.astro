---
// src/components/Form/forms/ApplicationForm.astro
/**
 * Application Form - Astro Version
 *
 * Extended form for premium offering applications (like mentorship).
 * Used in OtherHero right slot for optin product pages.
 */
import Button from "@/components/Button/Button";
import FormWrapper from "@/components/Form/FormWrapper";
import Input from "@/components/Form/inputs/Input";
import Textarea from "@/components/Form/inputs/Textarea";
import Checkbox from "@/components/Form/inputs/Checkbox";

interface Props {
  title?: string;
  description?: string;
  submitText?: string;
  successMessage?: string;
  variant?: "primary" | "secondary" | "tertiary";
  className?: string;
  productName?: string;
}

const {
  title = "Apply Now",
  description = "Fill out the application below. We review all applications within 48 hours.",
  submitText = "Submit Application",
  successMessage = "Thank you for applying! We'll review your application and get back to you within 48 hours.",
  variant = "tertiary",
  className = "",
  productName = "",
} = Astro.props;

const handleSubmit = async (values: any) => {
  console.log("Application form submitted:", { ...values, productName });
};
---

<div class={`bg-gradient-to-br from-[#1a1708] to-[#0f0d05] rounded-2xl border border-primary/30 p-8 md:p-10 w-full max-w-md ${className}`}>
  {/* Form Header */}
  <div class="text-center mb-8">
    <h3 class="text-2xl md:text-3xl font-bold text-white mb-3">
      {title}
    </h3>
    <p class="text-text-muted">
      {description}
    </p>
  </div>

  {/* Form */}
  <FormWrapper
    client:idle
    onSubmit={handleSubmit}
    successMessage={successMessage}
    errorMessage="There was an error submitting your application. Please try again."
    resetOnSuccess={true}
    className="w-full"
  >
    <div class="flex flex-col sm:flex-row gap-4 mb-4">
      <Input
        name="firstName"
        label="First Name"
        type="text"
        required={true}
        placeholder="First name"
        containerClassName="mb-0 flex-1"
        inputClassName="w-full px-4 py-3 bg-bg border border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-white placeholder:text-text-dim"
      />

      <Input
        name="lastName"
        label="Last Name"
        type="text"
        required={true}
        placeholder="Last name"
        containerClassName="mb-0 flex-1"
        inputClassName="w-full px-4 py-3 bg-bg border border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-white placeholder:text-text-dim"
      />
    </div>

    <Input
      name="email"
      label="Email Address"
      type="email"
      required={true}
      placeholder="you@email.com"
      containerClassName="mb-4"
      inputClassName="w-full px-4 py-3 bg-bg border border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-white placeholder:text-text-dim"
    />

    <Input
      name="phone"
      label="Phone Number"
      type="tel"
      required={true}
      placeholder="Your phone number"
      containerClassName="mb-4"
      inputClassName="w-full px-4 py-3 bg-bg border border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-white placeholder:text-text-dim"
    />

    <Textarea
      name="goals"
      label="What are your financial goals?"
      required={true}
      placeholder="Tell us about your goals and what you hope to achieve..."
      rows={3}
      containerClassName="mb-4"
      textareaClassName="w-full px-4 py-3 bg-bg border border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-white placeholder:text-text-dim resize-none"
    />

    <Textarea
      name="whyYou"
      label="Why should we work with you?"
      required={true}
      placeholder="Tell us why you're serious about this opportunity..."
      rows={3}
      containerClassName="mb-4"
      textareaClassName="w-full px-4 py-3 bg-bg border border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-white placeholder:text-text-dim resize-none"
    />

    <Checkbox
      name="consent"
      required
      containerClassName="mb-6"
      checkboxClassName="w-4 h-4 text-primary border-white/20 rounded"
    >
      <span class="text-text-muted text-sm">
        I agree to receive updates and understand that submitting this application does not guarantee acceptance.
      </span>
    </Checkbox>

    <Button
      variant={variant}
      type="submit"
      className="w-full"
    >
      {submitText} â†’
    </Button>

    {/* Trust indicators */}
    <div class="mt-6 pt-6 border-t border-white/10 flex flex-wrap justify-center gap-4 text-text-dim text-xs">
      <span class="flex items-center gap-1">ğŸ”’ Secure & Private</span>
      <span class="flex items-center gap-1">â±ï¸ 48hr Response</span>
      <span class="flex items-center gap-1">âœ… Serious Applicants Only</span>
    </div>
  </FormWrapper>
</div>
