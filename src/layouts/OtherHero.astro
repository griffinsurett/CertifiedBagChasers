---
// src/layouts/OtherHero.astro
/**
 * Other Hero Layout
 *
 * Two-column hero section with gradient background (no image).
 * Features:
 * - Dark gradient background with gold/green accents
 * - Two-column layout: text on left, empty slot on right
 * - Big text heading with eyebrow/highlight/after pattern
 * - Badge for status (coming soon, most popular, premium)
 * - Description and optional price
 * - Decorative lines overlay
 * - Right slot for additional content
 */

export interface Props {
  title: string;
  description?: string;
  heading?: string | { before?: string; text?: string; after?: string };
  price?: string;
  priceNote?: string;
  status?: "available" | "coming-soon" | "free";
  tags?: string[];
  className?: string;
  minHeight?: string;
  singleColumn?: boolean;
}

const {
  title,
  description,
  heading,
  price,
  priceNote,
  status = "available",
  tags = [],
  className = "",
  minHeight = "100vh",
  singleColumn = false,
} = Astro.props;

// Map heading schema to display
// heading.before -> eyebrow (small text above title)
// heading.text -> highlighted part of the big heading (gold metallic)
// heading.after -> text after highlighted part
const eyebrow = heading && typeof heading === 'object' && 'before' in heading ? heading.before : undefined;
const highlightedText = heading && typeof heading === 'object' && 'text' in heading ? heading.text : (typeof heading === 'string' ? heading : undefined);
const afterText = heading && typeof heading === 'object' && 'after' in heading ? heading.after : undefined;

const isMostPopular = tags?.includes("most-popular");
const isComingSoon = status === "coming-soon";
const isPremiumOffering = tags?.includes("premium-offering");

// Check if there's content in the right slot
const hasRightSlot = Astro.slots.has("right");
const showRightColumn = hasRightSlot && !singleColumn;
---

<section class={`relative ${className}`}>
  <div
    class="relative flex items-center overflow-hidden px-5 hero-space py-16 md:py-24"
    style={`min-height: ${minHeight}`}
  >
    {/* Decorative lines overlay */}
    <div class="hero-lines absolute inset-0 opacity-10 pointer-events-none"></div>

    {/* Two-column layout - always two columns */}
    <div class="relative z-10 max-w-[1200px] mx-auto w-full">
      <div class:list={[
        "grid grid-cols-1 items-center",
        showRightColumn ? "lg:grid-cols-2 gap-12 lg:gap-16" : "",
      ]}>

        {/* Left Column - Text Content */}
        <div class="text-left">
          {/* Status Badge */}
          {isComingSoon && (
            <div class="inline-block bg-gradient-to-r from-primary-800 via-primary to-primary-100 text-bg py-1.5 px-4 rounded-full text-xs font-bold uppercase tracking-[1px] mb-6">
              üöÄ Coming Soon
            </div>
          )}

          {isMostPopular && !isComingSoon && (
            <div class="inline-block bg-gradient-to-r from-primary-800 via-primary to-primary-100 text-bg py-1.5 px-4 rounded-full text-xs font-bold uppercase tracking-[1px] mb-6">
              üî• Most Popular
            </div>
          )}

          {isPremiumOffering && !isComingSoon && !isMostPopular && (
            <div class="inline-block bg-gradient-to-r from-primary-800 via-primary to-primary-100 text-bg py-1.5 px-4 rounded-full text-xs font-bold uppercase tracking-[1px] mb-6">
              ‚≠ê Premium Offering
            </div>
          )}

          {/* Big Text Heading */}
          <h1 class="hero-heading text-[clamp(36px,6vw,80px)] leading-none mb-6">
            {eyebrow && (
              <span class="text-text block text-[clamp(18px,3vw,36px)] mb-2">{eyebrow}</span>
            )}
            {highlightedText ? (
              <span class="gold-metallic-heading block">{highlightedText}</span>
            ) : (
              <span class="gold-metallic-heading block">{title}</span>
            )}
            {afterText && (
              <span class="text-text block mt-2 text-[clamp(18px,3vw,36px)]">{afterText}</span>
            )}
          </h1>

          {/* Description */}
          {description && (
            <p class="text-lg md:text-xl text-text-secondary mb-6 leading-relaxed">
              {description}
            </p>
          )}

          {/* Price */}
          {price && (
            <div class="mb-6">
              <div class="text-4xl md:text-5xl font-extrabold text-white mb-2">
                {price}
              </div>
              {priceNote && (
                <span class="text-text-dim text-sm">
                  {priceNote}
                </span>
              )}
            </div>
          )}

          {/* Default slot for CTAs or additional content */}
          <slot />
        </div>

        {/* Right Column - Slot for additional content */}
        {showRightColumn && (
          <div class="flex items-center justify-center">
            <slot name="right" />
          </div>
        )}
      </div>
    </div>
  </div>
</section>

<style>
  /* Hero gradient background */
  .hero-gradient {
    background:
      linear-gradient(135deg, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.9) 100%),
      radial-gradient(ellipse at bottom left, rgba(201,162,39,0.15) 0%, transparent 50%),
      radial-gradient(ellipse at top right, rgba(34,87,67,0.2) 0%, transparent 50%),
      #0a0a0a;
  }

  /* Decorative lines */
  .hero-lines {
    background:
      linear-gradient(45deg, transparent 40%, rgba(201, 162, 39, 0.3) 45%, transparent 50%),
      linear-gradient(-45deg, transparent 40%, rgba(34, 87, 67, 0.3) 45%, transparent 50%);
  }

  /* Hero heading styles */
  .hero-heading {
    font-family: var(--font-display);
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 2px;
  }

  /* Gold metallic heading gradient */
  .gold-metallic-heading {
    background: linear-gradient(
      170deg,
      #fffde8 0%,
      #f7e588 8%,
      #dfc040 20%,
      #c9a227 35%,
      #b8922a 50%,
      #8a6a18 70%,
      #5c4510 90%,
      #3d2e0a 100%
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    filter: drop-shadow(2px 3px 0px #2a1d05) drop-shadow(3px 6px 8px rgba(0, 0, 0, 0.7));
  }
</style>
