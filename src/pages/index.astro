---
// src/pages/index.astro
import BaseLayout from "@/layouts/BaseLayout.astro";
import ContentRenderer from "@/components/ContentRenderer/ContentRenderer.astro";
import { siteData, ctaData } from "@/content/siteData";
import { query, sortByOrder } from "@/utils/query";
import { byItemKeys, byTag } from "@/utils/query/snippets";
import FrontPageHero from "@/layouts/FrontPageHero.astro";

// Section layouts
import AboutSection from "@/layouts/sections/AboutSection.astro";
import DifferenceSection from "@/layouts/sections/DifferenceSection.astro";
import CTASection from "@/layouts/sections/CTASection.astro";
import BackgroundMedia from "@/components/BackgroundMedia.astro";
import VideoPlaceholder from "@/components/VideoPlaceholder.astro";

// Assets
import BackgroundImg from "@/assets/inside-the-nyse.jpg";
---

<BaseLayout title="Home" description={siteData.description}>
  <main class="flex-1">
    <!-- Hero Section -->
    <FrontPageHero
      eyebrow="Financial Freedom Starts Here"
      heading={{ before: "Stop Chasing", text: "Quick Fixes" }}
      description={siteData.description}
      primaryCTA={{
        text: ctaData.text,
        link: ctaData.link,
      }}
      secondaryCTA={{
        text: ctaData.secondaryText,
        link: ctaData.secondaryLink,
      }}
    />

    <!-- VSL Video Section (placeholder) -->
    <section class="py-20 px-5 flex flex-col items-center">
      <VideoPlaceholder />
    </section>

    <!-- About Us + Social Proof Section with Background -->
    <section class="relative overflow-hidden">
      <BackgroundMedia
        backgroundMedia={{
          image: { src: BackgroundImg, imageClass: "bg-fixed" },
          overlayClass: "bg-black/70",
        }}
      />
      <AboutSection
        eyebrow="About Us"
        title="Welcome to"
        highlightedTitle="Certified Bag Chasers"
      >
        <p class="mb-6">
          Certified Bag Chasers is a financial education platform built for
          people who want to understand how markets actually work—not chase
          shortcuts.
        </p>

        <p class="mb-6">
          Founded by <span class="text-highlight">Arold Norelus</span>,
          Certified Bag Chasers was shaped by years of working closely with
          market participants across Wall Street—learning how institutional
          decision-makers analyze risk, interpret price action, and think
          through capital allocation in real time. That exposure, combined with
          a deep focus on market structure and communication, forms the
          foundation of everything we teach.
        </p>

        <p class="mb-6">
          As an <span class="text-highlight">Amazon best-selling author</span> of Managing the Motion of Money and a
          <span class="text-highlight">Chartered Market Technician (CMT) Level I</span>,
          Arold focuses on translating professional-grade frameworks into
          clear, practical lessons that everyday investors and operators can
          actually use.
        </p>

        <p>
          Our mission is simple:
          <span class="text-highlight">help you understand markets, build income, and move money intelligently</span>
          through education, discipline, and long-term thinking. At Certified
          Bag Chasers, we're building a community centered on learning,
          accountability, and making
          <span class="text-highlight">wise money moves that compound over time</span>
          —without hype or get-rich-quick promises.
        </p>
      </AboutSection>
    </section>

          <!-- Real Member Wins (Social Media Posts) -->
      <ContentRenderer
        query={query("testimonials").where((entry) => !!entry.data.socialMediaPost).orderBy(sortByOrder())}
        variant="SocialProofVariant"
      />

              <!-- Topics We Teach Section -->
    <ContentRenderer
      query={query("topics").orderBy(sortByOrder())}
      variant="TopicVariant"
    />


    <!-- The Difference Section -->
    <DifferenceSection ctaText={ctaData.text} ctaLink={ctaData.link} />

    <!-- Your Mentor Section -->
    <ContentRenderer
      query={byItemKeys("authors", "arold-norelus")}
      variant="AroldVariant"
    />

    <!-- Our Promise / Commitments Section -->
    <ContentRenderer
      query={query("promises").orderBy(sortByOrder())}
      variant="PromiseVariant"
    />

    <!-- Products / Pricing Section -->
    <ContentRenderer
      query={byTag("products", "featured").orderBy(sortByOrder())}
      variant="HomepageProductsVariant"
    />

    <!-- Success Stories (Text Testimonials) -->
    <ContentRenderer
      query={query("testimonials").where((entry) => !entry.data.socialMediaPost).orderBy(sortByOrder())}
      variant="TestimonialVariant"
    />

    <!-- FAQ Section -->
    <!-- <ContentRenderer
      query={query("faq").orderBy(sortByOrder())}
    /> -->

    <!-- Final CTA Section -->
    <CTASection ctaText={ctaData.text} ctaLink={ctaData.link} />

    <!-- Contact Section -->
    <!-- <ContentRenderer
      query={query("contact-us")}
    /> -->

    <!-- Social Media -->
    <!-- <ContentRenderer
      query={query("social-media").orderBy(sortByOrder())}
    /> -->
  </main>
</BaseLayout>
